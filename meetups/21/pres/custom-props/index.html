<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>Зачем нужны кастомные свойства?</title>

  <link href="slideshow.css" rel="stylesheet">
  <link href="theme.css" rel="stylesheet">
  <link href="talk.css" rel="stylesheet">
</head>
<body>
<header id="intro" class="slide image">
  <h1>Зачем нужны кастомные свойства</h1>
</header>

<section>
  <header class="slide">
    <h2>Для кого этот доклад?</h1>
  </header>

  <section class="slide slide--flex" title="Поддержка кастомных свойств">
    <a class="slide-item" href="https://caniuse.com/#feat=css-variables">
      <img src="img/support.png" alt="Поддержка кастомных свойств">
    </a>
  </section>

</section>

<section>
  <header class="slide">
    <h2>Что это такое?</h2>
  </header>

  <section class="slide">
    <h3>CSS-переменные,</h3>
    <p>которые просто работают:</p>
    <br>
    <textarea class="snippet">background-color: white;</textarea>
  </section>
</section>

<section>
  <header class="slide">
    <h2>Зачем это нужно?</h2>
  </header>

  <section class="slide slide--flex">
    <h3><del>Дублирование</del> кода</h3>
    <br>
    <div class="demo-area">
      <button class="button button--contrast" type="button">Обычная кнопка</button>
      <button class="button button--contrast button--modified" type="button">Необычная кнопка</button>
    </div>
    <textarea class="snippet">.button {
  background-image:
    linear-gradient(to right, royalblue, transparent),
    linear-gradient(to left, fuchsia, transparent);
}

.button--modified {

}</textarea>
  </section>

  <section class="slide slide--flex">
    <h3><del>Дублирование</del> кода</h3>
    <br>
    <div class="demo-area">
      <button class="button" type="button">Обычная кнопка</button>
    </div>
    <textarea class="snippet">.button {
  box-shadow: 2px 2px 10px 5px crimson;
}</textarea>
  </section>

  <section class="slide slide--flex">
    <h3>«Связывание» свойств</h3>
    <br>
    <div class="demo-area">
      <div class="box" tabindex="0">
        Прогресс
      </div>
    </div>
    <textarea class="snippet">.box {
  background-color: hsl(100, 60%, 70%);
  /*
  width:;
  letter-spacing:;
  */
}</textarea>
  </section>

  <section class="slide slide--flex">
    <h3>«Связывание» свойств</h3>
    <br>
    <div class="demo-area">
      <div class="box" tabindex="0">
        Прогресс
      </div>
    </div>
    <textarea class="snippet">.box {
  --coef: 100;
  background-color: hsl(var(--coef), 60%, 70%);

  width: calc(var(--coef) * 1%);
  letter-spacing: calc(var(--coef) * 0.01em);
}

.box:hover {

}</textarea>
  </section>

  <section class="slide slide--flex">
    <h3>Наследование свойств</h3>
    <br>
    <div class="demo-area">
      <div class="box">
        <div class="box__child"></div>
        <div class="box__child"></div>
        <div class="box__child"></div>
      </div>
    </div>
    <textarea class="snippet">.box {
  background-color: seagreen;
  padding: 20px;
}

.box__child {

}</textarea>
  </section>

  <section class="slide slide--flex">
      <h3>Влияние на SVG</h3>
      <br>
      <p>
  <pre>&lt;svg&gt;
  &lt;path fill="var(--flower-color, #ffb13b)"&gt;
  &lt;g stroke="var(--stroke-color, #000000)"&gt;
&lt;/svg&gt;</pre></p>
</section>

  <section class="slide slide--flex">
    <h3>Влияние на SVG</h3>
    <div class="demo-area">
      <svg style="display: none;">
          <symbol viewBox="0 0 300 300" id="svg-logo">
            <defs>
              <g id="SVG" fill="#ffffff" transform="scale(2) translate(20,79)">
                  <path id="S" d="M 5.482,31.319 C2.163,28.001 0.109,23.419 0.109,18.358 C0.109,8.232 8.322,0.024 18.443,0.024 C28.569,0.024 36.782,8.232 36.782,18.358 L26.042,18.358 C26.042,14.164 22.638,10.765 18.443,10.765 C14.249,10.765 10.850,14.164 10.850,18.358 C10.850,20.453 11.701,22.351 13.070,23.721 L13.075,23.721 C14.450,25.101 15.595,25.500 18.443,25.952 L18.443,25.952 C23.509,26.479 28.091,28.006 31.409,31.324 L31.409,31.324 C34.728,34.643 36.782,39.225 36.782,44.286 C36.782,54.412 28.569,62.625 18.443,62.625 C8.322,62.625 0.109,54.412 0.109,44.286 L10.850,44.286 C10.850,48.480 14.249,51.884 18.443,51.884 C22.638,51.884 26.042,48.480 26.042,44.286 C26.042,42.191 25.191,40.298 23.821,38.923 L23.816,38.923 C22.441,37.548 20.468,37.074 18.443,36.697 L18.443,36.692 C13.533,35.939 8.800,34.638 5.482,31.319 L5.482,31.319 L5.482,31.319 Z"/>

                  <path id="V" d="M 73.452,0.024 L60.482,62.625 L49.742,62.625 L36.782,0.024 L47.522,0.024 L55.122,36.687 L62.712,0.024 L73.452,0.024 Z"/>

                  <path id="G" d="M 91.792,25.952 L110.126,25.952 L110.126,44.286 L110.131,44.286 C110.131,54.413 101.918,62.626 91.792,62.626 C81.665,62.626 73.458,54.413 73.458,44.286 L73.458,44.286 L73.458,18.359 L73.453,18.359 C73.453,8.233 81.665,0.025 91.792,0.025 C101.913,0.025 110.126,8.233 110.126,18.359 L99.385,18.359 C99.385,14.169 95.981,10.765 91.792,10.765 C87.597,10.765 84.198,14.169 84.198,18.359 L84.198,44.286 L84.198,44.286 C84.198,48.481 87.597,51.880 91.792,51.880 C95.981,51.880 99.380,48.481 99.385,44.291 L99.385,44.286 L99.385,36.698 L91.792,36.698 L91.792,25.952 L91.792,25.952 Z"/>
                </g>
            </defs>

            <path id="base" fill="#000" d="M8.5,150 H291.5 V250 C291.5,273.5 273.5,291.5 250,291.5 H50 C26.5,291.5 8.5,273.5 8.5,250 Z"/>
            <g stroke-width="38.0086" stroke="var(--stroke-color, #000)">
              <g id="svgstar" transform="translate(150, 150)">
                <path id="svgbar" fill="var(--flower-color, #ffb13b)" d="M-84.1487,-15.8513 a22.4171,22.4171 0 1 0 0,31.7026 h168.2974 a22.4171,22.4171 0 1 0 0,-31.7026 Z"/>
                <use xlink:href="#svgbar" transform="rotate(45)"/>
                <use xlink:href="#svgbar" transform="rotate(90)"/>
                <use xlink:href="#svgbar" transform="rotate(135)"/>
              </g>
            </g>
            <use xlink:href="#svgstar"/>
            <use xlink:href="#base" opacity="0.85"/>
            <use xlink:href="#SVG"/>
          </symbol>
        </svg>
      <table style="text-align: center;">
        <tr>
          <td>
              <svg viewBox="0 0 300 300" width="200" height="200">
                  <defs>
                    <g id="SVG" fill="#ffffff" transform="scale(2) translate(20,79)">
                        <path id="S" d="M 5.482,31.319 C2.163,28.001 0.109,23.419 0.109,18.358 C0.109,8.232 8.322,0.024 18.443,0.024 C28.569,0.024 36.782,8.232 36.782,18.358 L26.042,18.358 C26.042,14.164 22.638,10.765 18.443,10.765 C14.249,10.765 10.850,14.164 10.850,18.358 C10.850,20.453 11.701,22.351 13.070,23.721 L13.075,23.721 C14.450,25.101 15.595,25.500 18.443,25.952 L18.443,25.952 C23.509,26.479 28.091,28.006 31.409,31.324 L31.409,31.324 C34.728,34.643 36.782,39.225 36.782,44.286 C36.782,54.412 28.569,62.625 18.443,62.625 C8.322,62.625 0.109,54.412 0.109,44.286 L10.850,44.286 C10.850,48.480 14.249,51.884 18.443,51.884 C22.638,51.884 26.042,48.480 26.042,44.286 C26.042,42.191 25.191,40.298 23.821,38.923 L23.816,38.923 C22.441,37.548 20.468,37.074 18.443,36.697 L18.443,36.692 C13.533,35.939 8.800,34.638 5.482,31.319 L5.482,31.319 L5.482,31.319 Z"/>

                        <path id="V" d="M 73.452,0.024 L60.482,62.625 L49.742,62.625 L36.782,0.024 L47.522,0.024 L55.122,36.687 L62.712,0.024 L73.452,0.024 Z"/>

                        <path id="G" d="M 91.792,25.952 L110.126,25.952 L110.126,44.286 L110.131,44.286 C110.131,54.413 101.918,62.626 91.792,62.626 C81.665,62.626 73.458,54.413 73.458,44.286 L73.458,44.286 L73.458,18.359 L73.453,18.359 C73.453,8.233 81.665,0.025 91.792,0.025 C101.913,0.025 110.126,8.233 110.126,18.359 L99.385,18.359 C99.385,14.169 95.981,10.765 91.792,10.765 C87.597,10.765 84.198,14.169 84.198,18.359 L84.198,44.286 L84.198,44.286 C84.198,48.481 87.597,51.880 91.792,51.880 C95.981,51.880 99.380,48.481 99.385,44.291 L99.385,44.286 L99.385,36.698 L91.792,36.698 L91.792,25.952 L91.792,25.952 Z"/>
                      </g>
                  </defs>

                  <path id="base" fill="#000" d="M8.5,150 H291.5 V250 C291.5,273.5 273.5,291.5 250,291.5 H50 C26.5,291.5 8.5,273.5 8.5,250 Z"/>
                  <g stroke-width="38.0086" stroke="var(--stroke-color, #000)">
                    <g id="svgstar" transform="translate(150, 150)">
                      <path id="svgbar" fill="var(--flower-color, #ffb13b)" d="M-84.1487,-15.8513 a22.4171,22.4171 0 1 0 0,31.7026 h168.2974 a22.4171,22.4171 0 1 0 0,-31.7026 Z"/>
                      <use xlink:href="#svgbar" transform="rotate(45)"/>
                      <use xlink:href="#svgbar" transform="rotate(90)"/>
                      <use xlink:href="#svgbar" transform="rotate(135)"/>
                    </g>
                  </g>
                  <use xlink:href="#svgstar"/>
                  <use xlink:href="#base" opacity="0.85"/>
                  <use xlink:href="#SVG"/>
                </svg>
          </td>
          <td>
              <svg width="200" height="200">
                <use xlink:href="#svg-logo"></use>
              </svg>
          </td>
          <td>
              <svg width="200" height="200">
                <use xlink:href="img/sprite.svg#svg-logo"></use>
              </svg>
          </td>
        </tr>
        <tr>
          <td style="padding: 20px; width: 300px;">Inline</td>
          <td style="padding: 20px; width: 300px;">Inline symbol</td>
          <td style="padding: 20px; width: 300px;">Remote symbol</td>
        </tr>
      </table>
    </div>
    <textarea class="snippet">svg {
  --flower-color:;
  --stroke-color:;
}</textarea>
  </section>
</section>

<section>
  <header class="slide">
    <h2>На что это похоже?</h2>
  </header>

  <section class="slide image" id="controls">
  </section>

  <section class="slide image" id="puppets">
  </section>

  <section class="slide image" id="musculus">
  </section>

  <section class="slide slide--flex">
      <h3>CSS-мышцы <a href="https://medium.com/p/429d9dc4499" target="_blank">статья</a></h3>
      <br>
      <div class="demo-area">
        <time class="clock">
            <span class="clock__hand clock__hand--hour"></span>:
            <span class="clock__hand clock__hand--minute"></span>:
            <span class="clock__hand clock__hand--second"></span>

            <svg class="clock__face" aria-hidden="true" role="presentation">
              <circle class="clock__face-stroke"></circle>
            </svg>
          </time>
      </div>
      <textarea class="snippet">.clock {
  --hours: 0;
  --minutes: 0;
  --seconds: 0;
}</textarea>
  </section>

  <section class="slide slide--flex">
      <h3>Подключаем мозг</h3>
      <br>
      <div class="demo-area">
        <time class="clock clock--alive">
            <span class="clock__hand clock__hand--hour"></span>:
            <span class="clock__hand clock__hand--minute"></span>:
            <span class="clock__hand clock__hand--second"></span>

            <svg class="clock__face" aria-hidden="true" role="presentation">
              <circle class="clock__face-stroke"></circle>
            </svg>
          </time>
          <table class="clock-table">
            <tr>
              <td><code></code></td>
              <td><code></code></td>
              <td><code></code></td>
            </tr>
          </table>
      </div>
  <script>
    const clock = document.querySelector('.clock--alive');
    const hoursBox = document.querySelector('.clock-table td:nth-child(1) code');
    const minutesBox = document.querySelector('.clock-table td:nth-child(2) code');
    const secondsBox = document.querySelector('.clock-table td:nth-child(3) code');

    const setCustomProperty = (name, value) => {
      clock.style.setProperty(`--${name}`, value);
    };

    const setTimeVariables = (time) => {
      setCustomProperty('hours', time.getHours());
      setCustomProperty('minutes', time.getMinutes());
      setCustomProperty('seconds', time.getSeconds());
    };

    const setTimeLayout = (time) => {
      hoursBox.textContent = time.getHours();
      minutesBox.textContent = time.getMinutes();
      secondsBox.textContent = time.getSeconds();

      clock.setAttribute('datetime', time.toISOString());
    }

    const setTime = () => {
      const now = new Date();

      setTimeVariables(now);
      setTimeLayout(now);
    }

    setTime();
    setInterval(setTime, 1000);

  </script>
  </section>

  <section class="slide slide--flex">
    <h3>JS → CSS</h3>
    <br>
<pre class="delayed"><span class="comment">// задаём значение кастомному свойству</span>
clock.style.setProperty('--hours', value);

<span class="comment">// читаем значение кастомного свойства</span>
getComputedStyle(clock).getPropertyValue('--hours');</pre>
  </section>

  <section class="slide slide--flex">
    <h3>JS → CSS</h3>
    <br>
    <p>Что можно?</p>
    <ul>
      <li class="delayed">координаты курсора (<a href="https://medium.com/p/dc69ca207e9c">статья</a>);</li>
      <li class="delayed">позиция скролла;</li>
      <li class="delayed">значения JS API;</li>
      <li class="delayed">значения HTML-инпутов.</li>
    </ul>
  </section>

  <section class="slide slide--flex" id="html-js-css">
    <h3>HTML → JS → CSS</h3>
    <br>
    <p>Инпуты управляют свойством <code>--number</code>:</p>
    <div class="demo-area">
      <input type="range" min="0" max="255" value="0" data-style="--number:{value};" class="css-control" /><br>
      <input type="number" min="0" max="255" value="0" data-style="--number:{value};" class="css-control" size="5" />
    </div>
    <textarea class="snippet"></textarea>
  </section>

  <section class="slide slide--flex">
    <h3>CSS → JS 🤔 <a href="https://medium.com/p/53af8ef67bd2">статья</a></h3>
    <br>
<pre class="delayed"><span class="comment">// задаём значение кастомному свойству</span>
:root {
  --script: console.log("🙈");
}

<span class="comment">// читаем значение кастомного свойства</span>
const style = getComputedStyle(document.documentElement);
const script = style.getPropertyValue('--script');

<span class="comment">// исполняем значение кастомного свойства</span>
new Function(script)();</pre>
  </section>
</section>

<section class="slide slide--flex">
  <h3>Итого</h3>
  <br>
  <p>Кастомные свойства:</p>
  <ul>
    <li class="delayed">легко внедряются и не требуют сборки;</li>
    <li class="delayed">делают CSS-код чище;</li>
    <li class="delayed">удобно связывают HTML, SVG, CSS и JS;</li>
    <li class="delayed">идеальны для управления темами;</li>
    <li class="delayed">дружат с препроцессорами.</li>
  </ul>
</section>

<footer class="slide" title="The End">
  <h3>Спасибо!</h3>
  <br>
  <p>Подписыватесь:</p>
  <ul>
    <li><a href="https://medium.com/@juwain">medium.com/@juwain</a></li>
    <li><a href="https://twitter.com/juwain">twitter.com/juwain</a></li>
    <li><a href="https://telegram.me/juwain">telegram.me/juwain</a></li>
  </ul>
</footer>

<script src="slideshow.js"></script>
<script src="plugins/css-edit.js"></script>
<script src="plugins/css-snippets.js"></script>
<script src="plugins/css-controls.js"></script>
<script src="plugins/code-highlight.js"></script>
<script>
var slideshow = new SlideShow();

var snippets = document.querySelectorAll('.snippet');
for(var i=0; i<snippets.length; i++) {
  new CSSSnippet(snippets[i]);
}

var cssControls = document.querySelectorAll('.css-control');
for(var i=0; i<cssControls.length; i++) {
  new CSSControl(cssControls[i]);
}
</script>

</body>
</html>
