<!DOCTYPE html>
<html lang="en">
<head>
    <title>cURL — веб без котиков</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="shower/themes/ribbon/styles/styles.css">

    <style>
        .shower {
            --slide-ratio: calc(16 / 9);
        }
    </style>
</head>

<body class="shower list">
<header class="caption">
    <h1>cURL - веб без котиков</h1>
    <p>Миша Баранов</p>
</header>

<section class="slide white clear">
    <header>
        <h2 style='margin-bottom: 0'>cURL — веб без котиков</h2>
        <p>Миша Баранов, PiterJS #24</p>
    </header>
    <figure><img src="img/curl-logo.jpg" class="cover" width="60%"></figure>
</section>

<section class='slide'>
    <h2>cURL</h2>

    <figure>
        <blockquote>
            <p>Most of us pronounce "curl" with an initial k sound, just like the English word curl.
                It rhymes with words like <strong>girl</strong> and <strong>earl</strong></p>

        </blockquote>
        <figcaption><a href='https://ec.haxx.se/'>Everything curl</a></figcaption>
    </figure>
</section>

<section class='slide'>
    <h2>Что это?</h2>

    <ul>
        <li class='next'>HTTP-клиент</li>
        <li class='next'>FTP-клиент</li>
        <li class='next'>Менеджер загрузок</li>
        <li class='next'>Программа командной строки (CLI)</li>
        <li class='next'>Кроссплатформенная</li>
    </ul>
</section>

<section class='slide'>
    <h2>Зачем?</h2>

    <div class='columns two'>
        <div class='next'>
            <h3>Автоматизация</h3>
            <ul class='next'>
                <li>Повторные запросы</li>
                <li class='next'>Нотификации</li>
                <li class='next'>Запросы к API</li>
            </ul>
        </div>
        <div class='next'>
            <h3>Отладка</h3>
            <ul class='next'>
                <li>Кеширование</li>
                <li class='next'>Редиректы</li>
                <li class='next'>Сжатие</li>
                <li class='next'>Всё, что может HTTP</li>
            </ul>
        </div>
    </div>
</section>

<section class='slide'>
    <h2>Коротко про CLI</h2>

    <pre>
        <code>curl <mark>--help</mark></code>
        <code class='next'>curl <mark>curl.haxx.se</mark></code>
        <code class='next'>curl <mark>--verbose</mark> curl.haxx.se</code>
        <code class='next'>curl <mark>-v</mark> curl.haxx.se</code>
        <code class='next'>curl <mark>--user</mark> <mark class="important">john:doe</mark> https://curl.haxx.se/</code>
        <code class='next'>curl <mark>-vu</mark> <mark class="important">john:doe</mark> https://curl.haxx.se/</code>
        <code class='next'>curl -T <mark class='important'>"</mark>upload this<mark class='important'>"</mark> https://curl.haxx.se/</code>
    </pre>
</section>

<section class='slide'>
    <h2>Как устроен HTTP</h2>

    <pre>
        <code>--> Подключение</code>
        <code class='next'>--> Отправка запроса</code>
        <code class='next'>    ...  </code>
        <code class='next'><-- Получение ответа</code>
        <code class='next'> x  Закрытие соединения</code>
    </pre>
</section>

<section class='slide'>
    <h2>Стркуктура HTTP-запроса</h2>

    <pre>
        <code>Стартовая строка</code>
        <code class='next'>Заголовоки запроса</code>
    </pre>
</section>

<section class='slide'>
    <h2>Стркуктура HTTP-запроса</h2>

    <pre>
        <code>GET / HTTP/1.1</code>
        <code><mark>Host:</mark> curl.haxx.se</code>
        <code>User-Agent: curl/7.54.0</code>
    </pre>
</section>

<section class='slide'>
    <h2>Стркуктура HTTP-ответа</h2>

    <pre>
        <code>Стартовая строка</code>
        <code>Заголовоки ответа</code>
        <code>Пустая строка</code>
        <code>Тело ответа</code>
    </pre>
</section>

<section class='slide'>
    <h2>Стркуктура HTTP-ответа</h2>

    <pre>
        <code>HTTP/1.1 200 <mark>OK</mark></code>
        <code>server: Apache</code>
        <code>content-length: 8541</code>
        <code>&nbsp;</code>
        <code>&lt;html></code>
        <code>&hellip;</code>
        <code>&lt;/html></code>
    </pre>
</section>

<section class='slide white clear'>
    <figure><video src="img/http-base.mp4" controls class="cover" height='90%'></figure>
</section>

<section class='slide'>
    <h2>Прежде чем начать</h2>

    <pre>
        <code>curl <mark>-V</mark></code>
        <code>curl <mark>--version</mark></code>
    </pre>
</section>

<section class='slide white clear'>
    <figure><video controls src="img/version.mp4" class="cover" height='90%'></figure>
</section>

<section class='slide'>
    <h2>Простые запросы при помощи cURL</h2>

    <ul class='next'>
        <li>GET-запрос</li>
        <li class='next'>Просмотр заголовков ответа</li>
        <li class='next'>Просмотр заголовков запроса и ответа</li>
    </ul>
</section>

<section class='slide'>
    <h2>Простые запросы при помощи cURL</h2>

    <pre>
        <code>curl https://curl.haxx.se/</code>
        <code>curl <mark>-i</mark> https://curl.haxx.se/</code>
        <code>curl <mark>-I</mark> https://curl.haxx.se/</code>
        <code>curl <mark>-D</mark> headers.txt https://curl.haxx.se/</code>
        <code>curl <mark>-v</mark> https://curl.haxx.se/</code>
    </pre>
</section>

<section class='slide white clear'>
    <figure><video controls src="img/get.mp4" class="cover" height='90%'></figure>
</section>

<section class='slide white clear'>
    <figure><video controls src="img/get-headers.mp4" class="cover" height='90%'></figure>
</section>

<section class='slide white clear'>
    <figure><video controls src="img/get-headers-only.mp4" class="cover" height='90%'></figure>
</section>

<section class='slide white clear'>
    <figure><video controls src="img/get-dump-headers.mp4" class="cover" height='90%'></figure>
</section>

<section class='slide white clear'>
    <figure><video controls src="img/verbose.mp4" class="cover" height='90%'></figure>
</section>

<section class='slide'>
    <h2>Несколько запросов подряд</h2>

    <ul class='next'>
        <li>Цепочка запросов</li>
        <li class='next'>Подстановка символов</li>
    </ul>
</section>

<section class='slide'>
    <h2>Несколько запросов подряд</h2>

    <pre>
        <code>curl httpstat.us/200 <mark>-:</mark> -i httpstat.us/300 \
    <mark>-:</mark> -I httpstat.us/400</code>
        <code>curl httpstat.us/<mark>[500-510]</mark></code>
    </pre>
</section>

<section class='slide white clear'>
    <figure><video controls src="img/get-next.mp4" class="cover" height='90%'></figure>
</section>

<section class='slide white clear'>
    <figure><video controls src="img/get-glob.mp4" class="cover" height='90%'></figure>
</section>

<section class='slide'>
    <h2>Сохранение файла</h2>

    <ul class='next'>
        <li>Перенаправление stdout</li>
        <li class='next'>Явное указание имени файла</li>
        <li class='next'>Использование имени файла с сервера</li>
    </ul>
</section>

<section class='slide'>
    <h2>Сохранение файла</h2>

    <pre>
        <code>curl https://curl.haxx.se/logo/curl-logo.svg <mark>></mark> logo-1.svg</code>
        <code>curl <mark>-o logo-2.svg</mark> https://curl.haxx.se/logo/curl-logo.svg</code>
        <code>curl <mark>-O</mark> https://curl.haxx.se/logo/curl-logo.svg</code>
    </pre>
</section>

<section class='slide white clear'>
    <figure><video controls src="img/download.mp4" class="cover" height='90%'></figure>
</section>

<section class='slide'>
    <h2>Отслеживане перенаправлений</h2>

    <pre>
        <code>curl curl.haxx.se</code>
        <code>curl <mark>-L</mark> curl.haxx.se</code>
    </pre>
</section>

<section class='slide white clear'>
    <figure><video controls src="img/redirect.mp4" class="cover" height='90%'></figure>
</section>

<section class='slide'>
    <h2>Оправка данных на сервер</h2>

    <ul class='next'>
        <li>Get + querystring</li>
        <li class='next'>POST
            <ul class='next'>
                <li>Просто данные</li>
                <li>HTML-форма</li>
                <li>Файл</li>
            </ul>
        </li>
        <li class='next'>PUT</li>
        <li class='next'>PATCH</li>
    </ul>
</section>

<section class='slide'>
    <h2>GET + querystring</h2>

    <pre>
        <code>curl https://postman-echo.com/get?foo=bar&bar=baz</code>
        <code>curl <mark>-G</mark> <mark class="important">-d</mark> foo1=bar1 <mark class="important">-d</mark> foo1=bar1 \
    https://postman-echo.com/get</code>
    </pre>
</section>

<section class='slide white clear'>
    <figure><video controls src="img/data-get.mp4" class="cover" height='90%'></figure>
</section>

<section class='slide'>
    <h2>POST</h2>

    <pre>
        <code>curl <mark>-X POST</mark> -d foo1=bar1 -d foo1=bar1 \
    https://postman-echo.com/post</code>
        <code>curl -X POST -d "Do you have a cookie?" \
    https://postman-echo.com/post</code>
    </pre>
</section>

<section class='slide white clear'>
    <figure><video controls src="img/data-post.mp4" class="cover" height='90%'></figure>
</section>

<section class='slide'>
    <h2>POST</h2>

    <pre>
        <code>curl -X POST -d '{"message": "Do you have a cookie?"}' \
    <mark>-H "Content-Type: application/json"</mark> \
    https://postman-echo.com/post</code>
        <code>curl -X POST <mark>-d @data.json</mark> \
    -H "Content-Type: application/json" \
    https://postman-echo.com/post</code>
        <code>curl -X POST -F data=@data.json https://postman-echo.com/post</code>
    </pre>
</section>

<section class='slide white clear'>
    <figure><video controls src="img/data-json.mp4" class="cover" height='90%'></figure>
</section>

<section class='slide white clear'>
    <figure><video controls src="img/data-files.mp4" class="cover" height='90%'></figure>
</section>

<section class='slide'>
    <h2>Авторизация</h2>

    <ul class='next'>
        <li>HTTP Basic</li>
        <li class='next'>Digest</li>
        <li class='next'>Cookie</li>
        <li class='next'>Kerberos</li>
        <li class='next'>oAuth 2</li>
    </ul>
</section>

<section class='slide'>
    <h2>Авторизация</h2>

    <pre>
        <code>curl -u postman \
    https://<mark>postman:password</mark>@postman-echo.com/basic-auth</code>
        <code>curl <mark>-u</mark> postman \
    https://postman-echo.com/basic-auth</code>
        <code>curl -u postman:password https://postman-echo.com/basic-auth</code>
        <code>curl https://cloud.arrival.com/api/v1/user \
    -H 'authorization: Bearer -J3APXXZNNOHPPEZPHDORW'</code>
    </pre>
</section>


<section class='slide'>
    <h2>Убираем лишнее</h2>

    <pre>
        <code>curl https://cloud.arrival.com/api/v1/user \
    -H 'content-type: application/json' \
    -H 'authorization: Bearer -J3APXXZNNOHPPEZPHDORW' \
    --compressed</code>
        <code>curl <mark>-K config.txt</mark> 'https://cloud.arrival.com/api/v1/user'</code>
    </pre>
</section>

<section class='slide white clear'>
    <figure><video controls src="img/config.mp4" class="cover" height='90%'></figure>
</section>

<section class='slide clear'>
    <h2 class='shout shrink'>Божечки-кошечки!</h2>
</section>

<section class='slide white clear'>
    <figure><video controls src="img/devtools.mp4" class="cover" height='90%'></figure>
</section>

<section class='slide clear'>
    <h2 class='shout shrink'>Happy cURLing!</h2>
</section>

<section class="slide white clear">
    <h2>Спасибо!</h2>
    <h3>Миша Баранов</h3>

    <ul>
        <li><a href='https://mkhl.brnv.ru'>mkhl.brnv.ru</a></li>
        <li><a href='mailto:mkhl@brnv.ru'>mkhl@brnv.ru</a></li>
        <li><a href='https://github.com/h4'>github.com/h4</a></li>
    </ul>
</section>

<div class="progress"></div>

<script src="shower/shower.min.js"></script>
<!-- Copyright © 2018 Yours Truly, Famous Inc. -->
</body>
</html>
