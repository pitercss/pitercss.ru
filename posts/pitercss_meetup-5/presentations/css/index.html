<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Why CSS was invented</title>

<!--
In the beginning, web pages didn't say anything about fonts, colours or layout. Cascading Style Sheets (CSS) was invented to change this, and today all web pages use CSS. How did this come about? What tools do we find in the CSS toolbox, and why? Which should be added in the future?

 - cern,

 - html, css; webfonts, testing, acid2

 - opera, opera mini, chicago buses, kontiki

 - page-based design, printing

-->

</head><body class="loaded" style="transform: scale(1.05882);">

<section aria-selected="true">
  <figure>
    <img src="files/columns.jpg">
  </figure>
  <header>
<h1>Why CSS was invented</h1><p>Håkon Wium Lie</p><p><em>howcome@opera.com</em></p></header>
</section>

<section><figure><img src="files/chtml.png"></figure></section>

<section><figure class="narrow"><img src="files/y-senkevich.jpg"></figure></section>
<section><figure><img src="files/heyerdahl.jpg"></figure></section>

<section><figure><img src="files/kt2-forfra.jpg"></figure></section>
<section><figure><img src="files/kon-tiki2.jpg"></figure></section>
<section><figure><img src="files/kt2-iridium.jpg"></figure></section>
<section><figure><img src="files/kt2-opera-max.jpg"></figure></section>
<section><figure><img src="files/kt2-opera-mini.jpg"></figure></section>
<section><figure><img src="files/kt2-ctd.jpg"></figure></section>
<section><figure><img src="files/kt2-blog.png"></figure></section>
<section><figure><img src="files/kt2-phone.jpg"></figure></section>
<section><figure><img src="files/kt2-fish1.jpg"></figure></section>
<section><figure><img src="files/kt2-fish2.jpg"></figure></section>
<section><figure><img src="files/kt2-fish3.jpg"></figure></section>
<section><figure><img src="files/kt2-fish4.jpg"></figure></section>
<section><figure><img src="files/kt2-plastics1.jpg"></figure></section>
<section><figure><img src="files/kt2-plastics2.jpg"></figure></section>
<section><figure><img src="files/kt2-land.jpg"></figure></section>
<section><figure><img src="files/kt2-easter.jpg"></figure></section>

<!--
<section><figure><pitercss_meetup-29 src=../../2016/talks/pitercss_meetup-29/chtml.png></figure></section>
<section><figure><pitercss_meetup-29 src=../../2015/talks/pitercss_meetup-29/hadron-collider.jpg></figure></section>
-->
<!--<pitercss_meetup-29 class="slide" src="../../1998/talks/acpics/AC4.jpg">-->
<!--
<section><figure class=narrow><pitercss_meetup-29 class="slide" src="../../2014/talks/pitercss_meetup-29/AC5.jpg"></figure></section>
-->

<!--<section><figure><pitercss_meetup-29 src=../../2014/talks/pitercss_meetup-29/AC3.jpg></figure></section>-->
<!--
<section><figure><pitercss_meetup-29 src=../../2014/talks/pitercss_meetup-29/cern-2852272.jpg></figure></section>
-->

<section><figure class="narrow"><img src="files/mosaic.png"></figure></section>


<section><figure class="narrow"><img src="files/cern-2854154.jpg"></figure></section>

<section><figure class="narrow"><img src="files/cern-2853512.jpg"></figure></section>
<section><figure class="narrow"><img src="files/cern-2853627.jpg"></figure></section>
<section><figure class="narrow"><img src="files/cern-2853749.jpg"></figure></section>

<!--<section><figure><pitercss_meetup-29 src=../../2014/talks/pitercss_meetup-29/lowwwer.png></figure></section>-->
<section><figure><img style="padding: 20px" src="files/ap-1994-12-19-norges-lowwwer-sss.png"></figure></section>

<section class="txt">
<img class="center" src="files/ap-1994-12-19-norges-lowwwer-sss.png">
<p>"An anarchistic group of 20 volunteers tries to replace Lovdata. The group is publishing the laws of Norway from a computer in Switzerland. From there, the laws are freely available via the world's largest computer network, the Internet"</p>

</section>

<section><figure class="narrow"><img src="files/mosaic.png"></figure></section>

<section class="txt">
<h2>HTML</h2>

<pre>           &lt;h1&gt;Headline&lt;/h1&gt;
</pre>

<ul class="incremental">
<li>simple structure</li>
<li>universal semantics</li>
<li>media-independent</li>
<li>open standard</li>
</ul>
</section>


<section><figure class="narrow"><img src="files/mosaic.png"></figure></section>
<section><figure><img src="files/kon-tiki2.jpg"></figure></section>

<!--
<section><figure class=narrow><pitercss_meetup-29 class="slide" src="../../2014/talks/pitercss_meetup-29/AC5.jpg"></figure></section>
-->

<section class="txt">
<h2>CSS</h2>

<pre>           h1 {
             font-size: 14px;
             color: red;
           }
</pre>

<ul class="incremental">
<li>simple</li>
<li>presentational</li>
<li>media-dependent</li>
<li>open standard</li>
</ul>
</section>

<section class="txt">
<h2>HTML &amp; CSS</h2>

<pre>          &lt;h1&gt;Headline&lt;/h1&gt;

          h2 {
            font-size: 14px;
            color: red;
          }
</pre>


<ul class="incremental">
<li>simple</li>
<li>open standards</li>
</ul>

</section>


<section>
<h1>CSS properties</h1>
</section>

<section class="code">
<code> </code>
<span class="result">Some text</span>
</section>

<section class="code">
<code>font-size: 40px</code>
<span class="result" style="font-size: 40px">font-size</span>
</section>

<section class="code">
<code>font-style: italic</code>
<span class="result" style="font-style: italic">font-style</span>
</section>

<section class="code">
<code>font-family: serif</code>
<span class="result" style="font-family: Georgia, serif">font-family</span>
</section>

<section class="code">
<code>background: #fe7</code>
<span class="result" style="background: #fe7; padding: 0.1em">background</span>
</section>

<section class="code">
<code>border: 0.1em solid black</code>
<span class="result" style="border: 0.1em solid black; background: #fe7; padding: 0.1em 0.2em">border</span>
</section>

<section class="code">
<code>border: 0.1em solid #486</code>
<span class="result" style="border: 0.1em solid #486; background: #fe7; padding: 0.1em 0.2em">border-color</span>
</section>

<section class="code">
<code>border: 0.1em dotted #486</code>
<span class="result" style="border: 0.1em dotted #486; background: #fe7; padding: 0.1em 0.2em">border-style</span>
</section>

<section class="code">
<code>border: 0.3em inset #46F</code>
<span class="result" style="border: 0.3em inset #46F; background: white; padding: 0.1em 0.2em">border-width</span>
</section>

<section class="code">
<code>border: 0.5em outset #F46</code>
<span class="result" style="border: 0.5em outset #F46; background: white; padding: 0.1em 0.2em">border-width</span>
</section>


<section class="code">
<code>text-shadow: 10px 10px black</code>
<span class="result" style="color: white; background: #999; padding: 0.1em 0.3em; text-shadow: 10px 10px black">text-shadow</span>
</section>

<section class="code">
<code>text-shadow: 5px 5px 5px #F79</code>
<span class="result" style="text-shadow: 5px 5px 5px #F79">text-shadow</span>
</section>

<section class="code">
<code>text-shadow: 0px 0px 20px orange; color: white</code>
<span class="result" style="text-shadow: 0px 0px 20px orange; color: white">text-shadow</span>
</section>

<section>
<h1>CSS3</h1>
</section>

<section class="code">
<code>border-radius: 40px</code>
<span class="result common" style="border-radius: 40px">border-radius</span>
</section>

<section><figure><img src="files/1971.jpg"></figure></section>
<section><img style="width: 50%" src="files/1970.jpg"></section>
<section><figure><img src="files/iwatch.png"></figure></section>

<section class="code">
<code>border-radius: 40px</code>
<span class="result common" style="border-radius: 40px">border-radius</span>
</section>


<section class="code">
<code>border-radius: 150px / 50px</code>
<span class="result common" style="border-radius: 150px / 50px">border-radius</span>
</section>

<section class="code">
<code>border-radius: 60px 0 / 60px 0;</code>
<span class="result common" style="border-radius: 60px 0 / 60px 0">border-radius</span>
</section>


<section>
<h1>CSS3 transitions</h1>
</section>

<section>
<img alt="Norwegian coat of arms" class="coa" src="files/Coat_of_Arms_of_Norway.svg">
<pre>&lt;img src=coat-of-arm.svg&gt;
img { transition: 1s }
img:hover { transform: rotate(-360deg) }
</pre>
</section>

<!--
<section class=code>
<code>box-shadow: 20px 20px gray;</code>
<span class="result common" style="box-shadow: 20px 20px gray">box-shadow</span>
</section>

<section class=code>
<code>box-shadow: 20px 20px 10px #993;</code>
<span class="result common" style="box-shadow: 20px 20px 10px #993">box-shadow</span>
</section>

<section class=code>
<code>box-shadow: 0px 0px 20px 10px #993;</code>
<span class="result common" style="box-shadow: 0px 0px 20px 10px #993; border: none">box-shadow</span>
</section>

<section class=code>
<code>box-shadow: 0px 0px 20px 10px #993 inset;</code>
<span class="result common" style="box-shadow: 0px 0px 20px 10px #993 inset; border: none">box-shadow</span>
</section>
-->

<section>
<h1>Webfonts</h1>
</section>

<section>
<h2>Microsoft's Core fonts</h2>

<p style="font-size: 2em">
<span style="font-family: Andale Mono; white-space: nowrap">Andale Mono</span>
<span style="font-family: Arial">Arial</span>
<span style="font-family: Comic Sans MS; white-space: nowrap">Comic Sans MS</span>
<span style="font-family: Courier New; white-space: nowrap">Courier New</span>
<span style="font-family: Georgia">Georgia</span>
<span style="font-family: Impact">Impact</span>
<span style="font-family: Times New Roman; white-space: nowrap">Times New Roman</span>
<span style="font-family: Trebuchet MS; white-space: nowrap">Trebuchet MS</span>
<span style="font-family: Verdana">Verdana</span>
</p></section>

<section class="code">
  <code style="font-size: 70%">@import url(http://www.princexml.com/fonts/steffmann/index.css);<br>font-family: Angel</code>
  <span class="result" style="font-family: Angel">Angel</span>
</section>

<section class="code">
  <code>font-family: Becker Inline</code>
  <span class="result" style="font-family: Becker Inline">Becker Inline</span>
</section>

<section class="code">
  <code>font-family: Broadcast Titling</code>
  <span class="result" style="font-family: Broadcast Titling">Broadcast Titling</span>
</section>

<section class="code">
  <code>font-family: Cardiff</code>
  <span class="result" style="font-family: Cardiff">Cardiff
</span></section>


<section class="code">
  <code>font-family: Direction</code>
  <span class="result" style="font-family: Direction">Direction</span>
</section>

<section>
<pre style="font-size: 0.7em">


From: "Siebrand Mazeland (WMF)" &lt;smazeland@wikimedia.org&gt;
Date: Wed, 14 Dec 2011 18:49:19 +0100
Sender: wikitech-l-bounces@lists.wikimedia.org
To: wikitech-l@lists.wikimedia.org, mediawiki-i18n@lists.wikimedia.org
Subject: [Wikitech-l] Report on WebFonts deployment

On Monday December 12 at 18:00 UTC we deployed the extension
WebFonts[1] to 40 wikis in 11 Indic languages and Wikimedia Incubator
-- all wikis in Assamese, Bengali, Gujarati, Hindi, Kannada, Marathi,
Nepali, Oriya, (Eastern) Punjabi, Sankrit and Telugu have WebFonts
now. WebFonts was not deployed on Malayalam and Tamil projects. The
reason for this was that community members had requested us not to. We
are confident that in time, the communities will request that WebFonts
is enabled on their projects.

</pre>
</section>

<section><figure><img src="files/hindi-2.png"></figure></section>
<!--
<section><figure><pitercss_meetup-29 src=../../2014/talks/pitercss_meetup-29/hindi-1.png></figure></section>
<section><figure><pitercss_meetup-29 src=../../2014/talks/pitercss_meetup-29/hindi-2.png></figure></section>
-->


<section>
<h1>Testing</h1>
</section>

<section><figure class="narrow"><img src="files/css3-in-three-browsers.png"></figure></section>
<section><figure><img src="files/wasp.png"></figure></section>
<section><figure><img src="files/acid2-challenge.png"></figure></section>
<section><img src="files/acid2ok.png"></section>
<section><figure><img src="files/ie6acid.png"></figure></section>
<section><figure><img src="files/ie7acid.png"></figure></section>
<section><img src="files/acid2ok.png"></section>

<!--

<section><h1>Opera Bork Edition<br>2003</h1></section>

<section><figure class=narrow><pitercss_meetup-29 src=../../2015/talks/pitercss_meetup-29/msn_in_opera7.png></figure></section>
<section><figure><pitercss_meetup-29 src=../../2015/talks/pitercss_meetup-29/bork-press-release.png></figure></section>
<section><figure><pitercss_meetup-29 src=../../2016/talks/pitercss_meetup-29/bork-cnet.png></figure></section>
<section><figure class=narrow><pitercss_meetup-29 style="padding-top: 200px; padding-left: 200px; width: 1000px; height: auto" src=../../2015/talks/pitercss_meetup-29/bork.gif></figure></section>

-->

<section><figure class="narrow"><img src="files/devices.png"></figure></section>

<section><img src="files/operamini-compression1.png"></section>

<section><figure><img src="files/chicago-bus2.png"></figure></section>
<section><figure><img src="files/chicago-bus.png"></figure></section>

<!--
<section><figure><pitercss_meetup-29 src=../../2014/talks/pitercss_meetup-29/mini1.png></figure></section>
<section><figure><pitercss_meetup-29 src=../../2014/talks/pitercss_meetup-29/mini2.png></figure></section>
-->

<section><figure><img src="files/operamini-1-10.png"></figure></section>
<section><figure><img src="files/operamini-11-20b.png"></figure></section>
<section><figure><img src="files/operamini-middle-east.png"></figure></section>


<section>
<h2>New Opera features</h2>

<ul class="incremental">
<li>VPN
</li><li>ad-block
</li><li>battery save mode
</li><li>video pop-out
</li><li>personal news feed
</li></ul>

</section>


<section>
<h1>What's ahead?</h1>
</section>


<section>
<h1>Apps</h1>
</section>

<section><figure><img src="files/flipboard.jpg"></figure></section>
<section><figure><img src="files/paper-facebook-app.jpg"></figure></section>
<section><figure><img src="files/our-choice.jpg"></figure></section>


<section>
<h1>Multicolumn layout</h1>
</section>

<section><figure><img class="slide" src="files/css-multi-column-layout.png"></figure></section>
<section><figure><img src="files/two-column.png"></figure></section>
<section><figure><img src="files/newspaper.jpg"></figure></section>


<!--<section><figure><pitercss_meetup-29 src=../../2016/talks/pitercss_meetup-29/regions-considered-harmful.png></figure></section>-->





<!--

<section>
<h2>8 lines of CSS code</h2>

<pre>
body { overflow: paged-x }
article { columns: 14em; column-fill: auto }
h1 { column-span: 2; float: top }
.lead { column-span: 2; float: top; }
.fig { column-span: 2 }
.fig pitercss_meetup-29 { width: 100% }
.first.fig { float: bottom }
.second.fig { float: top; float-defer-column: last }
</pre>
</section>
-->


<section>
<h1>Books</h1>
</section>

<section><figure class="narrow"><img src="files/cssdftw-1.png"></figure></section>
<section><figure class="narrow"><img src="files/cssdftw-2.png"></figure></section>
<section><figure class="narrow"><img src="files/cssdftw-2.png"></figure></section>

<!--
<section><figure><pitercss_meetup-29 src=../../2015/talks/pitercss_meetup-29/essay1.png></figure></section>
<section><figure><pitercss_meetup-29 src=../../2015/talks/pitercss_meetup-29/essay2.png></figure></section>
<section><figure><pitercss_meetup-29 src=../../2015/talks/pitercss_meetup-29/postulata1.png></figure></section>
<section><figure><pitercss_meetup-29 src=../../2015/talks/pitercss_meetup-29/postulata2.png></figure></section>

<section class=txt>
<pre style="font-size: 0.6em">
body {
  font: 14pt / 1.4 "Adobe Caslon Pro", serif;
  font-variant: opentype(dlig, onum);
  hyphens: auto;
  text-replace:
    "s" "\017F"         /* replace s with long s, which looks like f */
    "\017Ff" "sf"       /* revert change where s appears before f */
    "\017Fi" "si"       /* revert change where s appears before i */
    "\017F\20" "s\20"   /* revert change at end of word */
    "\017F\0A" "s\20"   /* revert change at end of word, where newline follows */
    "\017F\200B" "s\20" /* revert change at end of word, where zero width space follows */
    "\017F," "s,"       /* revert change at end of word, where comma follows */
    "\017F;" "s;"       /* revert change at end of word, where semicolon follow */
    "\017F:" "s:"       /* revert change at end of word, where colon follows */
    "\017F." "s."       /* revert change at end of word, where period follows */
    ":" "\2008:";       /* add punctuation space before colon */
}
</pre>
</section>
-->

<section><figure><img src="files/gutenberg-morgan.jpg"></figure></section>

<section>
<h1>How long will the web last?</h1>
</section>

<section>
<h1 class="center huge">500 years!</h1>
</section>

<section><figure><img src="files/gutenberg.png"></figure></section>
<section><figure><img src="files/columns.jpg"></figure></section>


<!-- style starts -->

<style>@import url("http://fonts.googleapis.com/css?family=Oswald");
@import url("http://fonts.googleapis.com/css?family=Ubuntu");

@media screen, projection, print {

  html, .view body { background-color: black; counter-reset: slideidx; }
  body, .view section { background-color: white; xborder-radius: 12px }

  section, .view head > title {
      font: 40px 'Ubuntu', 'Gill Sans', sans-serif;
  }

  header {
    position: absolute;
    bottom: 20%;
    width: 100%;
    padding: 20px 50px;
    margin: 0;
    background: rgba(255,255,255,0.8);
    font-size: 70px;
  }

  header h1 { font-size: 50px; font-style: normal; margin: 0.3em 0; padding: 0; text-align: left; }
  header h2, header p { font-size: 40px; font-style: normal; margin: 0.3em 0; padding: 0; text-align: left; }

  section.code {
    text-align: center;
    font-family: Ubuntu, sans-serif;
  }

  section.code code {
    text-align: left;
    display: block;
    margin: 20px 10px 100px 5%;
    padding: 1em 0 50px;
  }

  section.code .result {
    font-size: 3em;
    text-align: center;
  }

  section.code .common {
    border: 0.1em solid black;
    background: #fe7;
    padding: 0.1em 0.3em
  }

  .center { text-align: center }
  .huge { font-size: 120px }
  section > img { display: block; margin: 30px auto }

  .view section:after {
    counter-increment: slideidx;
    content: counter(slideidx, decimal-leading-zero);
    position: absolute; bottom: -80px; right: 100px;
    color: white;
  }

  .view head > title {
    text-align: center;
    margin: 1em 0 1em 0;
  }

  h1 {
    color: #c00;
    margin: 200px 20px 20px 20px;
    text-align: center;
    font-size: 80px;
    font-weight: normal;
  }

  h2 {
    color: #c00;
    margin: 50px 0 20px 50px;
    text-align: left;
    font-size: 60px;
    font-weight: normal;
  }

  h3 {
    margin: 100px 0 50px 100px;
  }

  ul {
      margin: 50px 50px 50px 150px;
  }

  img.coa { width: 200px; }

  img.coa {
    -o-transition: 1s ease-in-out;
    -moz-transition: 1s ease-in-out;
    -webkit-transition: 1s ease-in-out;
    -ms-transition: 1s ease-in-out;
    transition: 1s ease-in-out;
    width: 200px;
    padding: 50px 0 50px;
    display: block;
    margin: 0 auto;
  }

  img.coa:hover {
    -o-transform: rotate(-360deg);
    -moz-transform: rotate(-360deg);
    -webkit-transform: rotate(-360deg);
    -ms-transform: rotate(-360deg);
     transform: rotate(-360deg);
  }

  #trans {
    margin: 100px auto;
    -o-transition-duration: 0.5s;
    -moz-transition-duration: 0.5s;
    -webkit-transition-duration: 0.5s;
    transition-duration: 0.5s;
  }

  #trans:hover {
    color: red;
    -o-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
    transform: rotate(90dg);
    letter-spacing: 10px;
  }

  li > ul {
      margin: 15px 50px;
  }

  p {
    margin: 50px;
    font-size: 35px;
  }

  pre {
    margin: 30px 50px;
  }

  .menu {
    display: inline-block;
    margin: 100px auto;
    border-radius: 6px; -o-border-radius: 6px;  -moz-border-radius: 6px; -webkit-border-radius: 6px;
    background: #888;
    box-shadow: 2px 2px 2px  #888, inset 0px 20px 30px 0px #ccc;
    font: bold 13px/20px Arial;
    color: #333;
  }

  .menu ul {
    display: inline; margin: 0; padding: 0; text-align: left;
  }

  .menu li {
    display: inline-block;
    text-shadow: 0px 1px #eee;
    border-right: 1px solid #777;
    padding: 5px 40px;
    margin: 0;
  }

  .menu .search {
    background: white;
    border-radius: 10px; -o-border-radius: 10px; -moz-border-radius: 10px; -webkit-border-radius: 10px;
    padding: 2px 40px 1px 20px;
    margin: 0 10px;
    box-shadow: inset 1px 1px 2px #444;
    font: 12px Arial;
  }

  /* sample-menu-big */

  .menu.big {
    font: bold 30px/40px Arial;
    color: black;
    box-shadow: 4px 4px 4px red, inset 0px 20px 30px 0px #ccc;
  }

  .menu.big li {
    text-shadow: 0px 2px white;
  }

  .menu.big .search {
    border-radius: 20px; -o-border-radius: 20px; -moz-border-radius: 20px; -webkit-border-radius: 20px;
    font: 30px Arial;
  }

  .menu.big .search {
    box-shadow: inset 2px 2px 4px red;
  }

  /* changes by howcome ends */

  blockquote {
    height: 100%;
    background-color: black;
    color: white;
    font-size: 30px;
    padding: 50px;
  }
  blockquote:before {
    content: open-quote;
  }
  blockquote:after {
    content: close-quote;
  }

  /* Figures are displayed full-page, with the caption
     on top of the image/video */
  figure {
    background-color: black;
    width: 100%;
    height: 100%;
  }
  figure > * {
    position: absolute;
  }
  figure > img, figure > video {
    width: 100%; height: 100%;
  }
  figure.narrow > img {
    width: 80%; margin-left: 10%;
  }
  figcaption {
    margin: 70px;
    font-size: 50px;
  }

  footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    padding: 40px;
    text-align: right;
    background-color: #F3F4F8;
    background: rgba(255, 255, 255, 0.3);
    /* border-top: 1px solid #CCC; */
  }

  /* Transition effect */
  /* Feel free to change the transition effect for original
     animations. See here:
     https://developer.mozilla.org/en/CSS/CSS_transitions
     How to use CSS3 Transitions: */
  section {
    -moz-transition: left 400ms linear 0s;
    -webkit-transition: left 400ms linear 0s;
    -ms-transition: left 400ms linear 0s;
    transition: left 400ms linear 0s;
  }
  .view section {
    -moz-transition: none;
    -webkit-transition: none;
    -ms-transition: none;
    transition: none;
  }

  .view section[aria-selected] {
    border: 5px red solid;
  }

  /* Before */
  section { left: -150%; }
  /* Now */
  section[aria-selected] { left: 0; }
  /* After */
  section[aria-selected] ~ section { left: +150%; }

  /* Incremental elements */

  /* By default, visible */
  .incremental > * { opacity: 1; }

  /* The current item */
  .incremental > *[aria-selected] { opacity: 1; }

  /* The items to-be-selected */
  .incremental > *[aria-selected] ~ * { opacity: 0; }

  /* The progressbar, at the bottom of the slides, show the global
     progress of the presentation. */
  #progress-bar {
    height: 2px;
    background: #AAA;
  }
}


@page { size: 297mm 190mm ; margin: 0 }

@media print {
  html { background: white }
  body { font-family: 'Ubuntu', 'Gill Sans', sans-serif }
  section { page-break-after: always; margin: 0 }
  section figure img { width: 100%; }
  section.txt { margin: 3em !important }
}

</style>

<!-- {{{{ dzslides core
#
#
#     __  __  __       .  __   ___  __
#    |  \  / /__` |    | |  \ |__  /__`
#    |__/ /_ .__/ |___ | |__/ |___ .__/ core :€
#
#
# The following block of code is not supposed to be edited.
# But if you want to change the behavior of these slides,
# feel free to hack it!
#
-->

<div id="progress-bar" style="width: 0%;"></div>

<!-- Default Style -->
<style>@media screen, projection {

  * { margin: 0; padding: 0; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
  [role="note"] { display: none; }

  body {
/*    width: 800px; height: 600px;
    margin-left: -400px; margin-top: -300px; */
    width: 1360px; height: 768px;
    margin-left: -684px; margin-top: -384px;
    position: absolute; top: 50%; left: 50%;
    overflow: hidden;
    display: none;
  }

  .view body {
    position: static;
    margin: 0; padding: 0;
    width: 100%; height: 100%;
    display: inline-block;
    overflow: visible; overflow-x: hidden;
    /* undo Dz.onresize */
    transform: none !important;
    -moz-transform: none !important;
    -webkit-transform: none !important;
    -o-transform: none !important;
    -ms-transform: none !important;
  }
  .view head, .view head > title { display: block }
  section {
    position: absolute;
    pointer-events: none;
    width: 100%; height: 100%;
  }
  .view section {
    pointer-events: auto;
    position: static;
/*    width: 800px; height: 600px;
    margin: -150px -200px; */
    width: 1360px; height: 768px;
    margin-left: -684px; margin-top: -384px;

    float: left;

    transform: scale(.4);
    -moz-transform: scale(.4);
    -webkit-transform: scale(.4);
    -o-transform: scale(.4);
    -ms-transform: scale(.4);
  }

  .view section > * { pointer-events: none; }
  section[aria-selected] { pointer-events: auto; }
  html { overflow: hidden; }
  html.view { overflow: visible; }
  body.loaded { display: block; }
  .incremental {visibility: hidden; }
  .incremental[active] {visibility: visible; }
  #progress-bar{
    bottom: 0;
    position: absolute;
    -moz-transition: width 400ms linear 0s;
    -webkit-transition: width 400ms linear 0s;
    -ms-transition: width 400ms linear 0s;
    transition: width 400ms linear 0s;
  }
  .view #progress-bar {
    display: none;
  }
}
</style>

<script>
  var Dz = {
    remoteWindows: [],
    idx: -1,
    step: 0,
    html: null,
    slides: null,
    progressBar : null,
    params: {
      autoplay: "1"
    }
  };

  Dz.init = function() {
    document.body.className = "loaded";
    this.slides = Array.prototype.slice.call($$("body > section"));
    this.progressBar = $("#progress-bar");
    this.html = document.body.parentNode;
    this.setupParams();
    this.onhashchange();
    this.setupTouchEvents();
    this.onresize();
    this.setupView();
  }

  Dz.setupParams = function() {
    var p = window.location.search.substr(1).split('&');
    p.forEach(function(e, i, a) {
      var keyVal = e.split('=');
      Dz.params[keyVal[0]] = decodeURIComponent(keyVal[1]);
    });
  // Specific params handling
    if (!+this.params.autoplay)
      $$.forEach($$("video"), function(v){ v.controls = true });
  }

  Dz.onkeydown = function(aEvent) {
    // Don't intercept keyboard shortcuts
    if (aEvent.altKey
      || aEvent.ctrlKey
      || aEvent.metaKey
      || aEvent.shiftKey) {
      return;
    }
    if ( aEvent.keyCode == 37 // left arrow
      || aEvent.keyCode == 38 // up arrow
      || aEvent.keyCode == 33 // page up
    ) {
      aEvent.preventDefault();
      this.back();
    }
    if ( aEvent.keyCode == 39 // right arrow
      || aEvent.keyCode == 40 // down arrow
      || aEvent.keyCode == 34 // page down
    ) {
      aEvent.preventDefault();
      this.forward();
    }
    if (aEvent.keyCode == 35) { // end
      aEvent.preventDefault();
      this.goEnd();
    }
    if (aEvent.keyCode == 36) { // home
      aEvent.preventDefault();
      this.goStart();
    }
    if (aEvent.keyCode == 32) { // space
      aEvent.preventDefault();
      this.toggleContent();
    }
    if (aEvent.keyCode == 70) { // f
      aEvent.preventDefault();
      this.goFullscreen();
    }
    if (aEvent.keyCode == 79) { // o
      aEvent.preventDefault();
      this.toggleView();
    }
  }

  /* Touch Events */

  Dz.setupTouchEvents = function() {
    var orgX, newX;
    var tracking = false;

    var db = document.body;
    db.addEventListener("touchstart", start.bind(this), false);
    db.addEventListener("touchmove", move.bind(this), false);

    function start(aEvent) {
      aEvent.preventDefault();
      tracking = true;
      orgX = aEvent.changedTouches[0].pageX;
    }

    function move(aEvent) {
      if (!tracking) return;
      newX = aEvent.changedTouches[0].pageX;
      if (orgX - newX > 100) {
        tracking = false;
        this.forward();
      } else {
        if (orgX - newX < -100) {
          tracking = false;
          this.back();
        }
      }
    }
  }

  Dz.setupView = function() {
    document.body.addEventListener("click", function ( e ) {
      if (!Dz.html.classList.contains("view")) return;
      if (!e.target || e.target.nodeName != "SECTION") return;

      Dz.html.classList.remove("view");
      Dz.setCursor(Dz.slides.indexOf(e.target) + 1);
    }, false);
  }

  /* Adapt the size of the slides to the window */

  Dz.onresize = function() {
    var db = document.body;
    var sx = db.clientWidth / window.innerWidth;
    var sy = db.clientHeight / window.innerHeight;
    var transform = "scale(" + (1/Math.max(sx, sy)) + ")";

    db.style.MozTransform = transform;
    db.style.WebkitTransform = transform;
    db.style.OTransform = transform;
    db.style.msTransform = transform;
    db.style.transform = transform;
  }


  Dz.getNotes = function(aIdx) {
    var s = $("section:nth-of-type(" + aIdx + ")");
    var d = s.$("[role='note']");
    return d ? d.innerHTML : "";
  }

  Dz.onmessage = function(aEvent) {
    var argv = aEvent.data.split(" "), argc = argv.length;
    argv.forEach(function(e, i, a) { a[i] = decodeURIComponent(e) });
    var win = aEvent.source;
    if (argv[0] === "REGISTER" && argc === 1) {
      this.remoteWindows.push(win);
      this.postMsg(win, "REGISTERED", document.title, this.slides.length);
      this.postMsg(win, "CURSOR", this.idx + "." + this.step);
      return;
    }
    if (argv[0] === "BACK" && argc === 1)
      this.back();
    if (argv[0] === "FORWARD" && argc === 1)
      this.forward();
    if (argv[0] === "START" && argc === 1)
      this.goStart();
    if (argv[0] === "END" && argc === 1)
      this.goEnd();
    if (argv[0] === "TOGGLE_CONTENT" && argc === 1)
      this.toggleContent();
    if (argv[0] === "SET_CURSOR" && argc === 2)
      window.location.hash = "#" + argv[1];
    if (argv[0] === "GET_CURSOR" && argc === 1)
      this.postMsg(win, "CURSOR", this.idx + "." + this.step);
    if (argv[0] === "GET_NOTES" && argc === 1)
      this.postMsg(win, "NOTES", this.getNotes(this.idx));
  }

  Dz.toggleContent = function() {
    // If a Video is present in this new slide, play it.
    // If a Video is present in the previous slide, stop it.
    var s = $("section[aria-selected]");
    if (s) {
      var video = s.$("video");
      if (video) {
        if (video.ended || video.paused) {
          video.play();
        } else {
          video.pause();
        }
      }
    }
  }

  Dz.setCursor = function(aIdx, aStep) {
    // If the user change the slide number in the URL bar, jump
    // to this slide.
    aStep = (aStep != 0 && typeof aStep !== "undefined") ? "." + aStep : ".0";
    window.location.hash = "#" + aIdx + aStep;
  }

  Dz.onhashchange = function() {
    var cursor = window.location.hash.split("#"),
        newidx = 1,
        newstep = 0;
    if (cursor.length == 2) {
      newidx = ~~cursor[1].split(".")[0];
      newstep = ~~cursor[1].split(".")[1];
      if (newstep > Dz.slides[newidx - 1].$$('.incremental > *').length) {
        newstep = 0;
        newidx++;
      }
    }
    this.setProgress(newidx, newstep);
    if (newidx != this.idx) {
      this.setSlide(newidx);
    }
    if (newstep != this.step) {
      this.setIncremental(newstep);
    }
    for (var i = 0; i < this.remoteWindows.length; i++) {
      this.postMsg(this.remoteWindows[i], "CURSOR", this.idx + "." + this.step);
    }
  }

  Dz.back = function() {
    if (this.idx == 1 && this.step == 0) {
      return;
    }
    if (this.step == 0) {
      this.setCursor(this.idx - 1,
                     this.slides[this.idx - 2].$$('.incremental > *').length);
    } else {
      this.setCursor(this.idx, this.step - 1);
    }
  }

  Dz.forward = function() {
    if (this.idx >= this.slides.length &&
        this.step >= this.slides[this.idx - 1].$$('.incremental > *').length) {
        return;
    }
    if (this.step >= this.slides[this.idx - 1].$$('.incremental > *').length) {
      this.setCursor(this.idx + 1, 0);
    } else {
      this.setCursor(this.idx, this.step + 1);
    }
  }

  Dz.goStart = function() {
    this.setCursor(1, 0);
  }

  Dz.goEnd = function() {
    var lastIdx = this.slides.length;
    var lastStep = this.slides[lastIdx - 1].$$('.incremental > *').length;
    this.setCursor(lastIdx, lastStep);
  }

  Dz.toggleView = function() {
    this.html.classList.toggle("view");

    if (this.html.classList.contains("view")) {
      $("section[aria-selected]").scrollIntoView(true);
    }
  }

  Dz.setSlide = function(aIdx) {
    this.idx = aIdx;
    var old = $("section[aria-selected]");
    var next = $("section:nth-of-type("+ this.idx +")");
    if (old) {
      old.removeAttribute("aria-selected");
      var video = old.$("video");
      if (video) {
        video.pause();
      }
    }
    if (next) {
      next.setAttribute("aria-selected", "true");
      if (this.html.classList.contains("view")) {
        next.scrollIntoView();
      }
      var video = next.$("video");
      if (video && !!+this.params.autoplay) {
        video.play();
      }
    } else {
      // That should not happen
      this.idx = -1;
      // console.warn("Slide doesn't exist.");
    }
  }

  Dz.setIncremental = function(aStep) {
    this.step = aStep;
    var old = this.slides[this.idx - 1].$('.incremental > *[aria-selected]');
    if (old) {
      old.removeAttribute('aria-selected');
    }
    var incrementals = $$('.incremental');
    if (this.step <= 0) {
      $$.forEach(incrementals, function(aNode) {
        aNode.removeAttribute('active');
      });
      return;
    }
    var next = this.slides[this.idx - 1].$$('.incremental > *')[this.step - 1];
    if (next) {
      next.setAttribute('aria-selected', true);
      next.parentNode.setAttribute('active', true);
      var found = false;
      $$.forEach(incrementals, function(aNode) {
        if (aNode != next.parentNode)
          if (found)
            aNode.removeAttribute('active');
          else
            aNode.setAttribute('active', true);
        else
          found = true;
      });
    } else {
      setCursor(this.idx, 0);
    }
    return next;
  }

  Dz.goFullscreen = function() {
    var html = $('html'),
        requestFullscreen = html.requestFullscreen || html.requestFullScreen || html.mozRequestFullScreen || html.webkitRequestFullScreen;
    if (requestFullscreen) {
      requestFullscreen.apply(html);
    }
  }

  Dz.setProgress = function(aIdx, aStep) {
    var slide = $("section:nth-of-type("+ aIdx +")");
    if (!slide)
      return;
    var steps = slide.$$('.incremental > *').length + 1,
        slideSize = 100 / (this.slides.length - 1),
        stepSize = slideSize / steps;
    this.progressBar.style.width = ((aIdx - 1) * slideSize + aStep * stepSize) + '%';
  }

  Dz.postMsg = function(aWin, aMsg) { // [arg0, [arg1...]]
    aMsg = [aMsg];
    for (var i = 2; i < arguments.length; i++)
      aMsg.push(encodeURIComponent(arguments[i]));
    aWin.postMessage(aMsg.join(" "), "*");
  }

  function init() {
    Dz.init();
    window.onkeydown = Dz.onkeydown.bind(Dz);
    window.onresize = Dz.onresize.bind(Dz);
    window.onhashchange = Dz.onhashchange.bind(Dz);
    window.onmessage = Dz.onmessage.bind(Dz);
  }

  window.onload = init;
</script>


<script> // Helpers
  if (!Function.prototype.bind) {
    Function.prototype.bind = function (oThis) {

      // closest thing possible to the ECMAScript 5 internal IsCallable
      // function
      if (typeof this !== "function")
      throw new TypeError(
        "Function.prototype.bind - what is trying to be fBound is not callable"
      );

      var aArgs = Array.prototype.slice.call(arguments, 1),
          fToBind = this,
          fNOP = function () {},
          fBound = function () {
            return fToBind.apply( this instanceof fNOP ? this : oThis || window,
                   aArgs.concat(Array.prototype.slice.call(arguments)));
          };

      fNOP.prototype = this.prototype;
      fBound.prototype = new fNOP();

      return fBound;
    };
  }

  var $ = (HTMLElement.prototype.$ = function(aQuery) {
    return this.querySelector(aQuery);
  }).bind(document);

  var $$ = (HTMLElement.prototype.$$ = function(aQuery) {
    return this.querySelectorAll(aQuery);
  }).bind(document);

  $$.forEach = function(nodeList, fun) {
    Array.prototype.forEach.call(nodeList, fun);
  }

</script>
<!-- vim: set fdm=marker: }}} -->
</body></html>
