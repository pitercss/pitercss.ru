<!DOCTYPE html>
<html lang="en">

<head>
	<title>Переменные в CSS</title>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="shower/themes/ribbon/styles/screen-16x10.css">
	<style>
		.slide {
			padding-top: 30px;
		}
		.slide::after {
			right: 10px;
			font-size: 25px;
			line-height: 50px;
		}
		.slide pre {
			font-size: 20px
		}
		.slide__side-left, .slide__side-right {
			width: 50%;
			text-align: center;
		}
		.slide__side-left:before, .slide__side-right:before {
			width: 50%;
			height: 100%;
			display: block;
			content: '';
			top: 0;
			z-index: -1;
			position: absolute;
		}
		.slide__side-left:before{
			left: 0;
			background-color: #FFCC40;
		}
		.slide__side-right:before  {
			right: 0;
			background-color: #7D44D6;
		}

		#example1__input {
			   height: 38px;
		}
		.slide_theme_purple {
			background-color: #7D44D6;
		}
		.slide_theme_yellow {
			background: #FFCC40;
		}
		.slide_theme_blue {
			background-color: #42aaff;
		}
		.slide_theme_raspberry {
			background-color: #c50050;
		}
		.slide_theme_violet {
			background-color: #8939a9;
		}
		.slide_theme_green {
			background-color: #359c69;
		}
		.slide_theme_light-green {
			background-color: #7ea91c;
		}
		.slide_theme_orange {
			background-color: #E67014;
		}
		.slide_colorful h2 {
		    color: white;
		}
	</style>
		<style>
		:root {
			--baseColor: #fff;
		}
		#example1 {
			background: var(--baseColor);
		}
		#example1 .text{
			color: var(--baseColor);
			filter: invert(1);
		}
	</style>
	<script>
	window.onload = () => {
		var styles = getComputedStyle(document.documentElement);
		var inputExample1 = document.getElementById('example1__input');
		inputExample1.addEventListener("change", () => {
			let inputExample1Val = inputExample1.value;
			document.documentElement.style.setProperty('--baseColor', inputExample1Val);
		});
	}
	</script>
</head>
<body class="shower list">
	<header class="caption">
		<h1>Переменные в CSS</h1>
		<p>Alexey Khlebaev</p>
	</header>
	<section class="slide" id="cover">
		<h2 style="bottom: 20px; position: absolute; text-align: center;">Переменные в CSS</h2>

		<img src="pictures/cover.jpg" alt="" class="cover">
		<!--
			To apply styles to the certain slides
			set slide ID to get needed elements
			-->
		<style>
			#cover h2 {
				margin:30px 0 0;
				color:#FFF;
				text-align:center;
				font-size:70px;
				}
			#cover p {
				margin:10px 0 0;
				text-align:center;
				color:#FFF;
				font-style:italic;
				font-size:20px;
				}
				#cover p a {
					color:#FFF;
					}
		</style>
	</section>
	<section class="slide">
		<h2>Куда катится CSS?</h2>
			<img class="next cover" style="margin-top: 30px;" src="pictures/griffin.gif" alt="CSS progress" />

	</section>
	<section class="slide">
		<h2>Куда катится CSS?</h2>
		<div style="text-align: center" class="note">
			<img src="pictures/progressCss.png" alt="CSS progress" />
		</div>
		<!--
		<div class="note" style="overflow: hidden">
			<img style="width: 200px; float: left;" src="pictures/cofee.png" alt="coffeescript" />
			<img style="height: 124px;
    margin-left: 100px;
    float: left;
    margin-top: 38px;" src="pictures/js.png" alt="coffeescript" />
		</div>
		<div class="note">
			<img style="width: 200px; float: left; margin-top: 35px;" src="pictures/sass.png" alt="coffeescript" />
			<img style="width: 200px; float: left; margin-left: 100px;" src="pictures/CSS.png" alt="coffeescript" />
		</div>
		-->
	</section>

	<section class="slide" style="color: #fff; font-size: 80px; line-height: 80px; 	display: -webkit-flex;
	display: -ms-flex;
	display: flex;
	-webkit-align-items: center;
	-webkit-box-align: center;
	-ms-flex-align: center;
	align-items: center; padding: 0">
		<div class="slide__side-left">
			Custom Properties
		</div>
		<div class="slide__side-right">
				@apply
		</div>


	</section>

	<section class="slide slide_colorful slide_theme_yellow ">
		<h2 class="shout">
			Custom Properties
		</h2>
	</section>

	<section class="slide" id="example1">

		<h2>Custom Properties (CSS переменные)</h2>
		<div class="text">
			<ul>
				<li>Прорыв в CSS. Аналогичного функционала раньше не было.</li>
				<li>Мощный инструмент, ограниченный лишь вашей фантазией.</li>
				<li>Не бойтесь использовать!</li>
			</ul>
	
			<div class="next">
				--baseColor: <input id="example1__input" style="height: 30px; background: inherit; font-size: 30px; color: inherit; border: none" value="#fff" type="text" />
			</div>
		</div>
		<footer class="footer">
			Custom Properties - это css переменные. Аналог переменных из препроцессора. Но с гораздно большими возможностями.
			Я уверен, что это прорыв для CSS, и возможности этого функционала еще не до конца иследованы!
			Мощь зависит от вашей фантазии!
			Вот на что способна моя фантазия)
		</footer>
	</section>

	<section class="slide">
		<h2>Custom Properties (CSS переменные)</h2>
		<h3>Какие проблемы решают:</h3>
		<ul>
			<li>Уменьшение количества повторяющегося кода в CSS.</li>
			<li>Гибкость и управляемость кода.</li>
			<li>Cоздание впечатляющих эффектов (смены тем на лету).</li>
			<li>Название содержит семантическую информацию.</li>
		</ul>
		<footer class="footer">
			CSS переменные и для чего они нужны.

		</footer>
	</section>

	<section class="slide">
		<h2>Custom Properties</h2>
		<pre>
			<code>:root {</code>
			<code class="mark">  --main-bg-color: brown;</code>
			<code>}</code>
			<code> </code>
			<code>body {</code>
  			<code  class="mark">	background-color: <span>var(--main-bg-color);</span></code>
			<code>}</code>
		</pre>
		<pre class="next">
  			<code  class="mark">background-color: <span>var(--main-bg-color, #000);</span></code>
		</pre>
		<footer class="footer">
			По спефикации, чтобы глобально объявить переменную, ее нужно объявлять в псевдо-классе root. Этот селектор соотвествуют корневому элементу. Для html - html
			Css переменные это свойства. Чтобы объявить css переменную нужно записать свойство начинающиеся с двух дефисов.
			As a value you can use colors, strings, values
			Чтобы получить свойство используется функция var. Она принимает два аргумента. Первый название переменной - обязательный, второй необезательный - значение по умолчанию
		</footer>
	</section>

	<section class="slide">
		<h2>Custom Properties. Js</h2>
		<p><strong>Получаем:</strong></p>
		<pre>
			<code>var documentProperties = getComputedStyle(document.documentElement);</code>
			<code>var value = documentProperties.<mark class="important">getPropertyValue('--primary-color')</mark>;</code>
		</pre>
		
		<p><strong>Назначаем</strong></p>
		<pre>
			<code>element.style.<mark class="important">setProperty</mark>('--variable', 'value');</code>
		</pre>
		<p><strong>Удаляем</strong></p>
		<pre>
			<code>element.style.<mark class="important">removeProperty</mark>('--variable');</code>
		</pre>

		<footer class="footer">
		Как получить значение переменной?
		В javascripte существует глобальный метод getComputedStyle. Он возвращает для переденного DOM-элемента объект с свойствами которые применяются, к этому элементу.
		У такого объекта со свойства существуют getter и setter.
		Чтобы получить для данного элемента конкретное свойство изпользуем метод getPropertyValue.
		Чтобы переопределеить свойство элемента применяем setProperty
		</footer>
	</section>


	<section class="slide">
		<h2>Custom Properties. Первые впечатления</h2>
		<div>
			<img src="pictures/What-Meme-13.jpg" style="float: left"/>
			<h3>Все круто, но</h3>
			<ul>
				<li class="next">Что за уродливый синтаксис?</li>
				<li class="next">В Sass уже есть переменные</li>
			</ul>
		</div>
	</section>
	<section class="slide slide_colorful slide_theme_blue">
		<h2 class="shout">
			Синтаксис
		</h2>
	</section>

	<section class="slide">
		<h2>Почему такой синтаксис?</h2>
		<ul>
			<li>Custom Properties - не переменные. Надо оставить будущим переменным</li>
			<li>Допустимая лексема CSS.</li>
		</ul>
		<footer class="footer">

		</footer>
	</section>

	<section class="slide slide_colorful slide_theme_green">
		<h2 class="shout">
			Отличия от переменных в препроцессорах
		</h2>
	</section>

	<section class="slide">
		<h2>
			Отличия от переменных в препроцессорах
		</h2>
			<ul>
				<li>Переменные препроцессоров исчезают при сборке.</li>
				<li>CSS переменные:
					<ul>
						<li>Для записи не нужен препроцессор.</li>
						<li>Работают в runtime, доступны для чтения/изменения.</li>
						<li>Живут в DOM'е, ограничены скоупом узла, наследуются до последнего потомка.</li>
						<li>Учитывают каскад.</li>
					</ul>
				</li>
			</ul>
	</section>

	<section class="slide slide_colorful slide_theme_green">
		<h2 class="shout">
			@media
		</h2>
	</section>

	<section class="slide">
		<h2>@media запросы<br/>
		<span style="color: red; font-size: 30px">Stylus</span></h2>
		<pre style="float: left">
			<code>gutter = 5px;</code>
			<code>@media (min-width: 100px) {</code>
			<code>  gutter = 20px;</code>
			<code>}</code>
			<code>.Container {</code>
			<code>  padding: gutter;</code>
			<code>}</code>
		</pre>

		<pre class="next" style="float: left; margin-left: 200px">
			<code>.Container {</code>
  			<code> padding: 5px;</code>
			<code>}</code>
		</pre>
		<footer class="footer">
			У нас есть блок контейнер и мы задаем его отступы через переменную. Допустим при разных размерах экрана нам нужны разные отступы.
		</footer>
	</section>

	<section class="slide">
		<h2>@media запросы<br/>
		<span style="color: red; font-size: 30px">CSS переменные</span></h2>
		<pre>
			<code>:root {</code>
			<code>  --gutter: 5px;</code>
			<code>}</code>
			<code>@media (min-width: 100px) {</code>
			<code>  --gutter: 20px;</code>
			<code>}</code>
			<code>.Container {</code>
			<code>   padding: var(--gutter);</code>
			<code>}</code>
		</pre>
	</section>
	<section class="slide">
		<h2>@media запросы</h2>
		<img style="width: 100%" src="pictures/grid.gif">
		<footer class="footer">
		В данном примере CHRIS'a COYIER'a геометрия дива задается css переменными. Например при ширине экрана больше 300px ширина 50%, а если меньше - 25%
		Это реализовано через изменение переменной в медиа запросе
		</footer>
	</section>

	<section class="slide slide_colorful slide_theme_green">
		<h2 class="shout">
			Каскад
		</h2>
	</section>
<section class="slide">
		<h2>Каскад<br/>
		<span style="color: red; font-size: 30px">Stylus</span></h2>
				<pre  style="float: left;">
		<code>&lt;div class=&quot;sideBar&quot;&gt;</code>
		<code>	&lt;div class=&quot;title&quot;&gt;Sidebar title&lt;/div&gt;</code>
		 <code>&lt;/div&gt;</code>
		 <code>&lt;div class=&quot;content&quot;&gt;</code>
		 <code>	&lt;div class=&quot;title&quot;&gt;Original title&lt;/div&gt;</code>
		 <code>&lt;/div&gt;</code>

		</pre>
		<pre class="next" style="float: left; margin-left: 60px">
			<code>titleColor = red;</code>
			<code>.title {</code>
			<code>  color: titleColor</code>
			<code>}</code>
			<code>.sideBar {</code>
			<code>  titleColor = blue</code>
			<code>}</code>
		</pre>
		<pre class="next" style="float: left;">
			<code>.title {</code>
  			<code>color: red;</code>
			<code>}</code>
		</pre>
	</section>


	<section class="slide">
		<h2>Каскад<br/>
		<span style="color: red; font-size: 30px">CSS переменные</span></h2>

		<pre style="float: left">
			<code>:root {</code>
			<code>  --titleColor: red;</code>
			<code>}</code>
			<code>.title {</code>
			<code>  color: var(--titleColor);</code>
			<code>}</code>
			<code>.sideBar {</code>
			<code>  --titleColor: blue;</code>
			<code>}</code>
		</pre>
		<div style="float: left; margin-left: 50px;">
		</div>
	</section>

	<section class="slide slide_theme_orange slide_colorful">
		<h2 class="shout">
			Поддержка
		</h2>
	</section>

	<section class="slide">
		<h2>Custom Properties</h2>
		<img style="height: 290px; margin-left: -95px;" src="pictures/cp_canIuse.png" />
	</section>

	<section class="slide">
		<h2>Custom Properties</h2>
		<img style="width: 100%" src="pictures/screen-ie.png" />
	</section>

	<section class="slide slide_theme_raspberry slide_colorful">
		<h2 class="shout">
			Примеры использования
		</h2>
	</section>

	<section class="slide">
		<h2>Яндекс. Главная страница поиска</h2>
		<p>Для чего используются CSS переменные?</p>
		<ul>
			<li>Эксперименты.</li>
			<li>Контроль над цветом и типографикой.</li>
			<li>Менеджеры могут изменять константы.</li>
		</ul>
	</section>

	<section class="slide">
		<h2>Custom Properties</h2>
		<p>Интересные решения:</p>
		<ul>
			<li>I18N.</li>
			<li>Autoprefixer.</li>
			<li>Контроль над рендирингом страницы.</li>
			<li>Условные операторы.</li>
			<li>RxJs + Custom Properties.</li>
		</ul>
	</section>

	<section class="slide">
		<h2>Рекомендации</h2>
		<ul>
			<li class="next"><code>:root</code></li>
			<li class="next"><code>var(--property, fallback)</code></li>
			<li class="next"><code>@supports</code></li>
			<li class="next"><code>--property-calc</code></li>
			<li class="next"><code>initial</code></li>
		</ul>
	</section>
	<section class="slide slide_theme_purple slide_colorful">
		<h2 class="shout">
			@apply
		</h2>
		<footer class="footer">
			Если после моего рассказа вы задумались о переходе на чистый CSS, то у вас наверное возник вопрос а где же миксины?
			И Таб Аткинс написал спецификацию которая вводит аналог миксинов в CSS - это apply деректива
		</footer>
	</section>
	<section class="slide">
		<h2>@apply</h2>
 		<ul>
			<li>Позволяет использовать в переменной набор свойств (аналог миксина).</li>
			<li>Синтаксис как у CSS переменных, только с "{ }".</li>
		</ul>
		<pre>
			<code>:root {</code>
			<code>	--pink-theme: {</code>
			<code>		color: #6A8759;</code>
			<code>		background-color: #F64778;</code>
    		<code>	}</code>
     		<code>}</code>
			<code>body {</code>
  			<code  class="mark">	@apply --pink-theme;</code>
			<code>}</code>
		</pre>
		<footer class="footer">
			Это спецификация позволяет нам использовать в перменной не только значения (цифры цвета) но и набор свойств, записанный квадратных скобочках.
			Чтобы вывести такую переменную деректива @apply(); На слайде я реализовал миксин для розовой темы, и присвоил его тегу body;
			К сажалению эта фича находиться в стадии черновика, и реализована только в хроме под флагом.  Enable experimental Web Platform features
		</footer>
	</section>

	<section class="slide slide_theme_raspberry slide_colorful">
		<h2 class="shout">
			Выводы
		</h2>
	</section>
	<section class="slide">
		<h2>Выводы:</h2>
		<ul>
			<li>Фичи из препроцессоров внедряются в CSS.</li>
			<li>CSS переменные - мощный инструмент.</li>
			<li>Не надо бояться использовать CSS переменные.</li>
		</ul>
		<footer class="footer">
			Надеюсь что в течении доклада я смог вас убедить, в том что
			- сss развивается в сторону внедрения функционала препроцессоров
			- Пожалуйста используйте css переменные это мощный не изведанный инструмент, мощь которого ограничена вашей фантазией
		</footer>
	</section>

	<section class="slide">
		<h2>Ссылки</h2>
		<ol>
			<li><a href="https://css-tricks.com/difference-between-types-of-css-variables/">What is the difference between CSS variables and preprocessor variables?</a></li>
			<li><a href="http://frontender.info/css-variables-why-should-you-care/">Переменные в CSS: зачем они нам?</a></li>
			<li><a href="https://www.youtube.com/watch?v=MmlJYjnHXhM">Пользовательские свойства как основа архитектуры CSS - Павел Ловцевич</a></li>
			<li><a href="https://blog.hospodarets.com/css_properties_in_depth">CSS custom properties (native variables) In-Depth</a></li>
			<li><a href="https://tabatkins.github.io/specs/css-apply-rule/">CSS @apply Rule</a></li>
			<li><a href="https://blog.gospodarets.com/css_apply_rule">CSS @apply rule (native CSS mixins)</a></li>
		</ol>
	</section>
	<section class="slide" id="see-more">
		<h2 class="shout">
			Спасибо!
		</h2>
		<style>
			#see-more h2 {
				font-size:100px
				}
			#see-more img {
				width:0.72em;
				height:0.72em;
				}
		</style>
	</section>
	<p class="badge">
		<a href="https://github.com/shower/shower">Fork me on GitHub</a>
	</p>
	<!--
		To hide progress bar from entire presentation
		just remove “progress” element.
		-->
	<div class="progress"></div>
	<script src="shower/shower.min.js"></script>
	<!-- Copyright © 2015 Yours Truly, Famous Inc. -->
	<!-- Photos by John Carey, fiftyfootshadows.net -->
</body>
</html>
